<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محرر أكواد متعدد اللغات</title>
    <!-- تضمين مكتبة CodeMirror -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <!-- تضمين اللغات المدعومة -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/css/css.min.js"></script>
    <style>
        /* تنسيقات الصفحة */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            background-color: #333;
            color: white;
            width: 100%;
            padding: 10px;
            text-align: center;
            font-size: 1.5rem;
        }

        #editor-container {
            margin: 20px;
            width: 90%;
            max-width: 1000px;
        }

        .editor {
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .run-btn {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
        }

        .run-btn:hover {
            background-color: #0056b3;
        }

        #output {
            margin-top: 20px;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        iframe {
            width: 100%;
            height: 400px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <header>محرر أكواد يدعم HTML وCSS وJavaScript</header>

    <div id="editor-container">
        <!-- محرر HTML -->
        <div>
            <h3>HTML</h3>
            <textarea id="html-editor" class="editor"><!DOCTYPE html>
<html>
<head>
    <title>Example</title>
</head>
<body>
    <h1>مرحبًا بالعالم!</h1>
</body>
</html></textarea>
        </div>

        <!-- محرر CSS -->
        <div>
            <h3>CSS</h3>
            <textarea id="css-editor" class="editor">body {
    background-color: #f4f4f4;
    color: #333;
    font-family: Arial, sans-serif;
}</textarea>
        </div>

        <!-- محرر JavaScript -->
        <div>
            <h3>JavaScript</h3>
            <textarea id="js-editor" class="editor">console.log('Hello, world!');</textarea>
        </div>

        <!-- زر التشغيل -->
        <button class="run-btn" onclick="runCode()">تشغيل الكود</button>

        <!-- منطقة الإخراج -->
        <div id="output">
            <h3>المعاينة:</h3>
            <iframe id="preview"></iframe>
        </div>
    </div>

    <script>
        // تهيئة محررات CodeMirror
        const htmlEditor = CodeMirror.fromTextArea(document.getElementById('html-editor'), {
            lineNumbers: true,
            mode: 'htmlmixed',
            theme: 'default',
            matchBrackets: true
        });

        const cssEditor = CodeMirror.fromTextArea(document.getElementById('css-editor'), {
            lineNumbers: true,
            mode: 'css',
            theme: 'default',
            matchBrackets: true
        });

        const jsEditor = CodeMirror.fromTextArea(document.getElementById('js-editor'), {
            lineNumbers: true,
            mode: 'javascript',
            theme: 'default',
            matchBrackets: true
        });

        // تشغيل الكود
        function runCode() {
            const htmlCode = htmlEditor.getValue();
            const cssCode = `<style>${cssEditor.getValue()}</style>`;
            const jsCode = `<script>${jsEditor.getValue()}<\/script>`;
            const previewFrame = document.getElementById('preview');
            const previewDocument = previewFrame.contentDocument || previewFrame.contentWindow.document;

            // تحديث iframe
            previewDocument.open();
            previewDocument.write(htmlCode + cssCode + jsCode);
            previewDocument.close();
        }
    </script>
</body>
</html>